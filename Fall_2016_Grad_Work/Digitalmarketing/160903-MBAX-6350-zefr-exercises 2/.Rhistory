View(alldata)
brands <- c("mtdew" )
dataFiles <- paste0(brands,".xlsx")
observationDates <- as.Date(c("2016-01-11","2016-01-16","2016-01-23", "2016-01-30", "2016-02-06", "2016-02-13"))
#observationDates <- as.Date(c("2016-01-11","2016-01-16"))
alldata <- data.frame()
#Outer "for" loop = a loop through the four files.
for(fileIndex in 1:length(dataFiles)){
fileName <- dataFiles[fileIndex]
#Inner "for" loop = a loop through the tabs in the spreadsheet.
for(tabIndex in 1:length(observationDates)){
#read in a tab (worksheet) from the file. Save it in a dataframe I call dataFromTab.
dataFromTab <- read.xlsx(fileName, sheet=tabIndex)
dataFromTab$brandname <- brands[fileIndex]
dataFromTab$datecollected <- observationDates[tabIndex]
alldata <- rbind(alldata, dataFromTab)
}
}
View(alldata)
colNamesForTables <- colnames(read.xlsx(dataFiles[1], sheet=1))
colNamesForTables
colNamesForTables <- c(colnames(read.xlsx(dataFiles[1], sheet=1)), "brandname", "datecollected")
colNamesForTables
#brands <- c("mtdew", "reeses", "shocktop", "snickers" )
brands <- c("mtdew" )
dataFiles <- paste0(brands,".xlsx")
observationDates <- as.Date(c("2016-01-11","2016-01-16","2016-01-23", "2016-01-30", "2016-02-06", "2016-02-13"))
#observationDates <- as.Date(c("2016-01-11","2016-01-16"))
colNamesForTables <- c(colnames(read.xlsx(dataFiles[1], sheet=1)), "brandname", "datecollected")
alldata <- data.frame()
#Outer "for" loop = a loop through the four files.
for(fileIndex in 1:length(dataFiles)){
fileName <- dataFiles[fileIndex]
#Inner "for" loop = a loop through the tabs in the spreadsheet.
for(tabIndex in 1:length(observationDates)){
#read in a tab (worksheet) from the file. Save it in a dataframe I call dataFromTab.
dataFromTab <- read.xlsx(fileName, sheet=tabIndex)
dataFromTab$brandname <- brands[fileIndex]
dataFromTab$datecollected <- observationDates[tabIndex]
alldata <- rbind(alldata, dataFromTab[,colNamesForTables])
}
}
View(alldata)
tail(alldata)
brands <- c("mtdew", "reeses", "shocktop", "snickers" )
dataFiles <- paste0(brands,".xlsx")
observationDates <- as.Date(c("2016-01-11","2016-01-16","2016-01-23", "2016-01-30", "2016-02-06", "2016-02-13"))
colNamesForTables <- c(colnames(read.xlsx(dataFiles[1], sheet=1)), "brandname", "datecollected")
alldata <- data.frame()
#Outer "for" loop = a loop through the four files.
for(fileIndex in 1:length(dataFiles)){
fileName <- dataFiles[fileIndex]
#Inner "for" loop = a loop through the tabs in the spreadsheet.
for(tabIndex in 1:length(observationDates)){
#read in a tab (worksheet) from the file. Save it in a dataframe I call dataFromTab.
dataFromTab <- read.xlsx(fileName, sheet=tabIndex)
#create column with brand
dataFromTab$brandname <- brands[fileIndex]
#create column with date
dataFromTab$datecollected <- observationDates[tabIndex]
#add columns to master data frame (called alldata)
alldata <- rbind(alldata, dataFromTab[,colNamesForTables])
} #end for tabIndex
} #end for fileIndex
foo<- read.xlsx("official-channels.xlsx", sheet=1)
foo
primaryOfficialChannels <- allOfficialChannels[allOfficialChannels$is.primary=="primary","channel.ID"]
allOfficialChannels<- read.xlsx("official-channels.xlsx", sheet=1)
primaryOfficialChannels <- allOfficialChannels[allOfficialChannels$is.primary=="primary","channel.ID"]
primaryOfficialChannels
?element
?is.element
str(alldata)
class(primaryOfficialChannels)
foo<-alldata[is.element(alldata$channel_id,primaryOfficialChannels),]
class(foo)
nrow(foo)
View(foo)
foo$publish_date
as.Date(foo$publish.date)
as.Date(foo$publish_date)
?as.Date
as.Date(foo$publish_date, origin="1900-01-01")
as.Date(1000)
as.Date(1000, origin="1900-01-01")
str(foo$publish_date)
as.Date(as.numeric(foo$publish_date), origin="1900-01-01")
as.Date(as.numeric(foo$publish_date), origin="1899-12-30")
str(foo)
officialChannelData<-alldata[is.element(alldata$channel_id,primaryOfficialChannels),]
mtdewOfficial <- officialChannelData[officialChannelData$brandname == "mtdew",]
View(mtdewOfficial)
unique(mtdewOfficial$video_ID)
mtdewOfficial$video_ID
str(mtdewOfficial)
unique(mtdewOfficial$video_id)
listofVideos<- unique(mtdewOfficial$video_id)
mtdewOfficial[mtdewOfficial$video_id == listofVideos[1],]
mtdewOfficial[mtdewOfficial$video_id == listofVideos[1],c("datecollected", "views")]
library(ggplot2)
videoTimeSeries<- mtdewOfficial[mtdewOfficial$video_id == listofVideos[1],c("datecollected", "views")]
ggplot(videoTimeSeries, aes(datecollected, views)) + geom_line() +
ggplot(videoTimeSeries, aes(datecollected, views)) + geom_line() + scale_x_date(format = "%b-%Y") + xlab("") + ylab("Cumulative Views"))
ggplot(videoTimeSeries, aes(datecollected, views)) + geom_line() + scale_x_date(format = "%b-%Y") + xlab("") + ylab("Cumulative Views")
ggplot(videoTimeSeries, aes(datecollected, views))
ggplot(videoTimeSeries, aes(datecollected, views)) + geom_line()
ggplot(videoTimeSeries, aes(datecollected, views)) + geom_line() + y_lab("Cumulative views")
ggplot(videoTimeSeries, aes(datecollected, views)) + geom_line() + ylab("Cumulative views")
ggplot(data=videoTimeSeries, aes(datecollected, views)) + geom_line() + ylab("Cumulative views")
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + ylab("Cumulative views")
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + ylab("Cumulative views") +theme_bw()
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + ylab("Cumulative views") +theme_classic()
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + ylab("Cumulative views") +theme_minimal()
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + ylab("Cumulative views") +theme_grey()
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + ylab("Cumulative views") +theme_minimal()
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs("Views","Date Collected","Cumulative views") +theme_minimal()
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels=date_format(%m/%d), breaks=date_breaks("2 weeks"))
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels=date_format("%m/%d"), breaks=date_breaks("2 weeks"))
?strptime
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels=date_format("%m/%d"))
?scale_x_date
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_datetime(labels=date_format("%m/%d"))
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_datetime(labels=waiver())
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels=waiver())
?scale_x_date
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels=waiver(), date_breaks="2 weeks")
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels=waiver(), date_breaks="6 days")
?scale_x_date
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels=waiver(), breaks=c(1,2,3))
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels=waiver(), breaks=c(1,2,3))
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels=waiver(), breaks=c("2016-01-11", "2016-01-30"))
library(scales)
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels=waiver(), date_breaks=c("2016-01-11", "2016-01-30"))
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels=waiver(), date_breaks=c(1,2,3))
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"))
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-30"),as.Date("2016-2-6") )
)
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))
ggplot()
+geom_line(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))
+geom_line(data=videoTimeSeries2, aes(x=datecollected, y=views)) + geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))
videoTimeSeries2<- mtdewOfficial[mtdewOfficial$video_id == listofVideos[2],c("datecollected", "views")]
+geom_line(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))
ggplot()+geom_line(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_line(data=videoTimeSeries2, aes(x=datecollected, y=views)) + geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))
ggplot()+geom_line(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_line(data=videoTimeSeries2, aes(x=datecollected, y=views)) + geom_point()
videoTimeSeries3<- mtdewOfficial[mtdewOfficial$video_id == listofVideos[3],c("datecollected", "views")]
ggplot()+geom_line(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_line(data=videoTimeSeries3, aes(x=datecollected, y=views)) + geom_point()
ggplot()+geom_line(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +ylim=c(0,100000)+geom_line(data=videoTimeSeries3, aes(x=datecollected, y=views)) + geom_point()
ggplot()+geom_line(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))+geom_line(data=videoTimeSeries3, aes(x=datecollected, y=views)) + geom_point()
nrow(alldata)
??melt
mtdewOfficial
df<-data.frame(date=as.Date(c('2014-06-25','2014-06-26','2014-06-27')),v1=rnorm(3),v2=rnorm(3))
newdf<-melt(df,'date')
ggplot(newdf,aes(x=date,y=value,group=variable,color=variable) ) + geom_line() +scale_x_date()
library(ggplot2)
library(scales)
library(reshape)
df<-data.frame(date=as.Date(c('2014-06-25','2014-06-26','2014-06-27')),v1=rnorm(3),v2=rnorm(3))
newdf<-melt(df,'date')
ggplot(newdf,aes(x=date,y=value,group=variable,color=variable) ) + geom_line() +scale_x_date()
df
newdf
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))
install.packages("directlabels", repos = "http://r-forge.r-project.org")
library(directlabels)
foo<- ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))
direct.label(foo, list(last.points, hjust = 0.7, vjust = 1))
library(directlabels)
foo<- ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))
foo
foo
last.points
direct.label(foo, list(last.points, hjust = 0.7, vjust = 1))
direct.label(foo, list(first.points, hjust = 0.7, vjust = 1))
??eval
direct.label(foo, list(first.qp, hjust = 0.7, vjust = 1))
library(nse)
install.packages("dplyr")
library(nse)
install.packages("nse")
library(nse)
direct.label(foo)
foo<- ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point()
direct.label(foo)
foo
foo<- ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))
foo
foo<- ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point()
foo
direct.label(foo, "top.points")
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) + geom_dl()
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) + geom_dl()
ggplot()+geom_line(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))+geom_line(data=videoTimeSeries3, aes(x=datecollected, y=views)) + geom_point()
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) + geom_dl()
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))
str(mtdewOfficial)
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data = mtdewOfficial, aes(label = title), hjust = 0.7, vjust = 1)
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data = mtdewOfficial, aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data = mtdewOfficial[1,], aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data = mtdewOfficial[,1], aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data = mtdewOfficial[listofVideos,], aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
?geom_text
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text( aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
?geom_text
p <- ggplot(mtcars, aes(wt, mpg, label = rownames(mtcars)))
p + geom_text()
# Avoid overlaps
p + geom_text(check_overlap = TRUE)
# Labels with background
p + geom_label()
# Change size of the label
p + geom_text(size = 10)
?geom_text
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text( aes(y = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text( aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-01-30"],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-01-30",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
ggplot(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_line()+geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_minimal()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))
ggplot()+geom_line(data=videoTimeSeries, aes(x=datecollected, y=views)) + geom_point() + labs(title="Views",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))+geom_line(data=videoTimeSeries3, aes(x=datecollected, y=views)) + geom_point()
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id), ylim=c(0,100000)) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id), ylim=c(0,100)) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id), coord_cartesian(ylim = c(-5000, 5000)) ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(-5000, 5000))
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 10000))
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 100000))
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 1000000))
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 10000000))
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 100000000))
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 40000000))
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 20000000))
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 20,000,000))
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 20000000))
ggplot(data=mtdewOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 20000000))+scale_y_continuous(labels=comma)
unique(mtdewOfficial$title)
reesesOfficial <- officialChannelData[officialChannelData$brandname == "reeses",]
snickersOfficial <- officialChannelData[officialChannelData$brandname == "snickers",]
shocktopOfficial <- officialChannelData[officialChannelData$brandname == "shocktop",]
ggplot(data=reeseswOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Reeses",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=reesesOfficial[reesesOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 20000000))+scale_y_continuous(labels=comma)
ggplot(data=reesesOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Reeses",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=reesesOfficial[reesesOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 20000000))+scale_y_continuous(labels=comma)
ggplot(data=reesesOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Reeses",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=reesesOfficial[reesesOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 2000000))+scale_y_continuous(labels=comma)
ggplot(data=reesesOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Reeses",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=reesesOfficial[reesesOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 3000000))+scale_y_continuous(labels=comma)
ggplot(data=snickersOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Snickers",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=snickersOfficial[snickersOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 3000000))+scale_y_continuous(labels=comma)
ggplot(data=snickersOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Snickers",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=snickersOfficial[snickersOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 30000000))+scale_y_continuous(labels=comma)
ggplot(data=snickersOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Snickers",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=snickersOfficial[snickersOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 90000000))+scale_y_continuous(labels=comma)
ggplot(data=snickersOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Snickers",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=snickersOfficial[snickersOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 20000000))+scale_y_continuous(labels=comma)
ggplot(data=snickersOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Snickers",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=snickersOfficial[snickersOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 16000000))+scale_y_continuous(labels=comma)
ggplot(data=shocktopOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Shock Top",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=shocktopOfficial[shocktopOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 16000000))+scale_y_continuous(labels=comma)
ggplot(data=shocktopOfficial, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Shock Top",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=shocktopOfficial[shocktopOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 5000000))+scale_y_continuous(labels=comma)
library(openxlsx)
brands <- c("mtdew", "reeses", "shocktop", "snickers" )
dataFiles <- paste0("data-F16/",brands,".xlsx")
dataFiles
colNamesForTables <- c(colnames(read.xlsx(dataFiles[1], sheet=1)), "brandname", "datecollected")
colNamesForTables
alldata <- data.frame()
#Outer "for" loop = a loop through the four files.
for(fileIndex in 1:length(dataFiles)){
fileName <- dataFiles[fileIndex]
#Inner "for" loop = a loop through the tabs in the spreadsheet.
for(tabIndex in 1:length(observationDates)){
#read in a tab (worksheet) from the file. Save it in a dataframe I call dataFromTab.
dataFromTab <- read.xlsx(fileName, sheet=tabIndex)
#create column with brand
dataFromTab$brandname <- brands[fileIndex]
#create column with date
dataFromTab$datecollected <- observationDates[tabIndex]
#add columns to master data frame (called alldata)
alldata <- rbind(alldata, dataFromTab[,colNamesForTables])
} #end for tabIndex
} #end for fileIndex
View(alldata)
#September 13, 2016
#Sample code for ZEFR project that shows how to read in the YouTube data and create a data frame listing unique video IDs and cumulative views on the different dates.
#install.packages("openxlsx")
library(openxlsx)
brands <- c("mtdew", "reeses", "shocktop", "snickers" )
dataFiles <- paste0("data-F16/",brands,".xlsx")
observationDates <- as.Date(c("2016-01-11","2016-01-16","2016-01-23", "2016-01-30", "2016-02-06", "2016-02-13"))
colNamesForTables <- c(colnames(read.xlsx(dataFiles[1], sheet=1)), "brandname", "datecollected")
alldata <- data.frame()
#Outer "for" loop = a loop through the four files.
for(fileIndex in 1:length(dataFiles)){
fileName <- dataFiles[fileIndex]
#Inner "for" loop = a loop through the tabs in the spreadsheet.
for(tabIndex in 1:length(observationDates)){
#read in a tab (worksheet) from the file. Save it in a dataframe I call dataFromTab.
dataFromTab <- read.xlsx(fileName, sheet=tabIndex)
#create column with brand
dataFromTab$brandname <- brands[fileIndex]
#create column with date
dataFromTab$datecollected <- observationDates[tabIndex]
#add columns to master data frame (called alldata)
alldata <- rbind(alldata, dataFromTab[,colNamesForTables])
} #end for tabIndex
} #end for fileIndex
allOfficialChannels<- read.xlsx("data-F16/official-channels.xlsx", sheet=1)
primaryOfficialChannels <- allOfficialChannels[allOfficialChannels$is.primary=="primary","channel.ID"]
primaryOfficialChannels
officialChannelData<-alldata[is.element(alldata$channel_id,primaryOfficialChannels),]
nrow(officialChannelData)
View(officialChannelData)
str(officialChannelData)
officialChannelData[brandname=="mtdew"]
officialChannelData[officialChannelData$brandname=="mtdew"]
officialChannelData[officialChannelData$brandname=="mtdew",]
officialChannelData[officialChannelData$brandname=="mtdew"&datecollected="2016-02-13",]
officialChannelData[officialChannelData$brandname=="mtdew"&officialChannelData$datecollected="2016-02-13",]
officialChannelData[officialChannelData$brandname=="mtdew"&officialChannelData$datecollected=="2016-02-13",]
officialChannelData[officialChannelData$brandname=="reeses"&officialChannelData$datecollected=="2016-02-13",]
nrow(officialChannelData[officialChannelData$brandname=="reeses"&officialChannelData$datecollected=="2016-02-13",])
for(i in 1:length(brands)){
theNumber<-nrow(officialChannelData[officialChannelData$brandname==brands[i]&officialChannelData$datecollected=="2016-02-13",])
print(paste(brand[i],theNumber))
}
for(i in 1:length(brands)){
theNumber<-nrow(officialChannelData[officialChannelData$brandname==brands[i]&officialChannelData$datecollected=="2016-02-13",])
print(paste(brands[i],theNumber))
}
foo<-officialChannelData[officialChannelData$brandname=="mtdew"&officialChannelData$datecollected=="2016-02-13","videoID"]
foo
str(officialChannelData)
foo<-officialChannelData[officialChannelData$brandname=="mtdew"&officialChannelData$datecollected=="2016-02-13","video_id"]
foo
?unique
#I wanted to double check that there weren't duplicates listed
for(i in 1:length(brands)){
theNumber<-nrow(unique(officialChannelData[officialChannelData$brandname==brands[i]&officialChannelData$datecollected=="2016-02-13","video_ID"]))
print(paste(brands[i],theNumber))
}
#I wanted to double check that there weren't duplicates listed
for(i in 1:length(brands)){
theNumber<-length(unique(officialChannelData[officialChannelData$brandname==brands[i]&officialChannelData$datecollected=="2016-02-13","video_ID"]))
print(paste(brands[i],theNumber))
}
officialChannelData[officialChannelData$brandname=="mtdew"&officialChannelData$datecollected=="2016-02-13","video_ID"])
officialChannelData[officialChannelData$brandname=="mtdew"&officialChannelData$datecollected=="2016-02-13","video_ID"]
officialChannelData[officialChannelData$brandname=="mtdew"&officialChannelData$datecollected=="2016-02-13","video_id"]
#I wanted to double check that there weren't duplicates listed
for(i in 1:length(brands)){
theNumber<-length(unique(officialChannelData[officialChannelData$brandname==brands[i]&officialChannelData$datecollected=="2016-02-13","video_id"]))
print(paste(brands[i],theNumber))
}
reesesVideoList <- officialChannelData[officialChannelData$brandname=="reeses"&officialChannelData$datecollected=="2016-02-13","video_id"]
reesesVideoList
?is.element
is.element(officialChannelData$video_id, reesesVideoList)
officialChannelData[officialChannelData$brandname=="reeses"&officialChannelData$datecollected!="2016-02-13"&is.element(officialChannelData$video_id, reesesVideoList),"video_id"]
unique(officialChannelData[officialChannelData$brandname=="reeses"&officialChannelData$datecollected!="2016-02-13"&is.element(officialChannelData$video_id, reesesVideoList),"video_id"])
reesesVideoListOtherDates<- unique(
officialChannelData
[
officialChannelData$brandname=="reeses"&officialChannelData$datecollected!="2016-02-13"&is.element(officialChannelData$video_id, reesesVideoList),
"video_id"
]
)
setdiff(reesesVideoList,reesesVideoListOtherDates)
setequal(reesesVideoList,reesesVideoListOtherDates)
reesesVideoList <- officialChannelData[officialChannelData$brandname=="mtdew"&officialChannelData$datecollected=="2016-02-13","video_id"]
reesesVideoListOtherDates<- unique(
officialChannelData
[
officialChannelData$brandname=="mtdew"&officialChannelData$datecollected!="2016-02-13"&is.element(officialChannelData$video_id, reesesVideoList),
"video_id"
]
)
setequal(reesesVideoList,reesesVideoListOtherDates)
reesesVideoList <- officialChannelData[officialChannelData$brandname=="shocktop"&officialChannelData$datecollected=="2016-02-13","video_id"]
reesesVideoListOtherDates<- unique(
officialChannelData
[
officialChannelData$brandname=="shocktop"&officialChannelData$datecollected!="2016-02-13"&is.element(officialChannelData$video_id, reesesVideoList),
"video_id"
]
)
setequal(reesesVideoList,reesesVideoListOtherDates)
reesesVideoList <- officialChannelData[officialChannelData$brandname=="snickers"&officialChannelData$datecollected=="2016-02-13","video_id"]
reesesVideoListOtherDates<- unique(
officialChannelData
[
officialChannelData$brandname=="snickers"&officialChannelData$datecollected!="2016-02-13"&is.element(officialChannelData$video_id, reesesVideoList),
"video_id"
]
)
setequal(reesesVideoList,reesesVideoListOtherDates)
brandVideoListLastDate <- officialChannelData[officialChannelData$brandname=="snickers"&officialChannelData$datecollected=="2016-02-13","video_id"]
brandVideoListOtherDates<- unique(
officialChannelData
[
officialChannelData$brandname=="snickers"&officialChannelData$datecollected!="2016-02-13"&is.element(officialChannelData$video_id, reesesVideoList),
"video_id"
]
)
setequal(brandVideoListLastDate,brandVideoListOtherDates)
brandVideoListLastDate <- officialChannelData[officialChannelData$brandname=="snickers"&officialChannelData$datecollected=="2016-02-13","video_id"]
length(brandVideoListLastDate)
brandVideoListOtherDates<- unique(
officialChannelData
[
officialChannelData$brandname=="snickers"&officialChannelData$datecollected!="2016-02-13"&is.element(officialChannelData$video_id, reesesVideoList),
"video_id"
]
)
length(brandVideoListOtherDates)
setdiff(brandVideoListLastDate,brandVideoListOtherDates)
setdiff(brandVideoListOtherDates,brandVideoListLastDates)
setdiff(brandVideoListOtherDates,brandVideoListLastDate)
newVideosLastDate<- setdiff(brandVideoListLastDate,brandVideoListOtherDates)
brandVideoListLastDate <- officialChannelData[officialChannelData$brandname=="snickers"&officialChannelData$datecollected=="2016-02-13","video_id"]
length(brandVideoListLastDate)
brandVideoListOtherDates<- unique(
officialChannelData
[
officialChannelData$brandname=="snickers"&officialChannelData$datecollected!="2016-02-13"&is.element(officialChannelData$video_id, brandVideoListLastDate),
"video_id"
]
)
length(brandVideoListOtherDates)
newVideosLastDate<- setdiff(brandVideoListLastDate,brandVideoListOtherDates)
officialChannelData[is.element(officialChannelData$video_id,newVideosLastDate),c("video_id", "title") ]
str(alldata)
officialChannelData[is.element(officialChannelData$video_id,newVideosLastDate),c("video_id", "title", "publish_date") ]
newVideosIDLastDate<- setdiff(brandVideoListLastDate,brandVideoListOtherDates)
newVideosInfoLastDate<-officialChannelData[is.element(officialChannelData$video_id,newVideosIDLastDate),c("video_id", "title", "publish_date") ]
newVideosInfoLastDate$publish_date2 <- as.Date(as.numeric(newVideosInfoLastDate$publish_date), origin="1899-12-30")
newVideosInfoLastDate
for(i in 1:length(brands)){
theNumber <- nrow(
officialChannelData
[
officialChannelData$brandname==brands[i]&officialChannelData$datecollected=="2016-02-13",
]
)
print(paste(brands[i],theNumber))
}
#I wanted to double check that there weren't duplicates of any of the videos listed
for(i in 1:length(brands)){
theNumber<-length(unique(officialChannelData[officialChannelData$brandname==brands[i]&officialChannelData$datecollected=="2016-02-13","video_id"]))
print(paste(brands[i],theNumber))
}
brandVideoListLastDate <- officialChannelData[officialChannelData$brandname=="mtdew"&officialChannelData$datecollected=="2016-02-13","video_id"]
length(brandVideoListLastDate)
str(alldata)
brandVideoViewsForIDList <- officialChannelData[is.element(officialChannelData$video_id,brandVideoListLastDate),c("video_id", "datecollected", "views")]
View(brandVideoViewsForIDList)
brandVideoViewsForIDList <- officialChannelData[is.element(officialChannelData$video_id,brandVideoListLastDate),c("video_id", "datecollected", "views", "title")]
View(brandVideoViewsForIDList)
library(ggplot2)
library(scales)
ggplot(data=brandVideoViewsForIDList, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=mtdewOfficial[mtdewOfficial$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 20000000))+scale_y_continuous(labels=comma)
library(ggplot2)
library(scales)
ggplot(data=brandVideoViewsForIDList, aes(x=datecollected, y=views, color=video_id, group=video_id)  ) + geom_line()+geom_point() + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +theme_bw()+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +geom_text(data=brandVideoViewsForIDList[brandVideoViewsForIDList$datecollected=="2016-02-06",],aes(label = title), hjust = 0.7, vjust = 1)+guides(color=FALSE)+coord_cartesian(ylim = c(0, 20000000))+scale_y_continuous(labels=comma)
ggplot(
data=brandVideoViewsForIDList,
aes(x=datecollected, y=views, color=video_id, group=video_id)
)
+ geom_line()
+geom_point()
+ labs(title="Mt Dew",x="Date Collected",y="Cumulative views")  +theme_bw()
+scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") ))
+guides(color=FALSE)
+coord_cartesian(ylim = c(0, 20000000))
+scale_y_continuous(labels=comma)
ggplot(
data=brandVideoViewsForIDList,
aes(x=datecollected, y=views, color=video_id, group=video_id)
)
+ geom_line()
ggplot(
data=brandVideoViewsForIDList,
aes(x=datecollected, y=views, color=video_id, group=video_id)
)
+ geom_line()
ggplot(
data=brandVideoViewsForIDList,
aes(x=datecollected, y=views, color=video_id, group=video_id)
)   + geom_line()
ggplot(
data=brandVideoViewsForIDList,
aes(x=datecollected, y=views, color=video_id, group=video_id)
)   + geom_line()
+ geom_point()
ggplot(
data=brandVideoViewsForIDList,
aes(x=datecollected, y=views, color=video_id, group=video_id)
)   + geom_line()   + geom_point()   + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") + theme_bw() +scale_x_date(labels = date_format("%m/%d"), breaks=c(as.Date("2016-1-16"),as.Date("2016-1-23"),as.Date("2016-1-30"),as.Date("2016-2-6"),as.Date("2016-2-13") )) +guides(color=FALSE) +coord_cartesian(ylim = c(0, 20000000)) +scale_y_continuous(labels=comma)
observationDates
ggplot(
data=brandVideoViewsForIDList,
aes(x=datecollected, y=views, color=video_id, group=video_id)
)   + geom_line()   + geom_point()   + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") + theme_bw() +scale_x_date(labels = date_format("%m/%d"), breaks=observationDates) +guides(color=FALSE) +coord_cartesian(ylim = c(0, 20000000)) +scale_y_continuous(labels=comma)
ggplot(
data=brandVideoViewsForIDList,
aes(x=datecollected, y=views, color=video_id, group=video_id)
)   +
geom_line()   + geom_point()   + labs(title="Mt Dew",x="Date Collected",y="Cumulative views") + theme_bw() +scale_x_date(labels = date_format("%m/%d"), breaks=observationDates) +guides(color=FALSE) +coord_cartesian(ylim = c(0, 20000000)) +scale_y_continuous(labels=comma)
library(ggplot2)
library(scales)
ggplot(
data=brandVideoViewsForIDList,
aes(x=datecollected, y=views, color=video_id, group=video_id)
)   +
geom_line()   +
geom_point()  +
labs(title="Mt Dew",x="Date Collected",y="Cumulative views") +
theme_bw() +scale_x_date(labels = date_format("%m/%d"), breaks=observationDates) +
guides(color=FALSE) +
coord_cartesian(ylim = c(0, 20000000)) +
scale_y_continuous(labels=comma)
